"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useAsyncEffect = void 0;
const react_1 = require("react");
const sentry_1 = require("../utils/development/sentry");
/**
 * Execute an async function and return a loading state and a function to call the async function
 * @param callback - The async function to execute
 * @param dependencies - The dependencies of the async function
 * @returns A tuple containing the loading state and a function to call the async function
 */
const useAsyncEffect = (callback, dependencies) => {
    return (0, react_1.useEffect)(() => {
        const promise = callback().catch((err) => {
            console.error(`AsyncEffect error: `, err);
            (0, sentry_1.sentry)((sentry) => sentry.captureException("AsyncEffect error: " + err.message, {
                extra: err,
            }));
        });
        return function () {
            promise.then((unsubscribe) => {
                if (typeof unsubscribe === "function") {
                    unsubscribe();
                }
            });
        };
    }, dependencies);
};
exports.useAsyncEffect = useAsyncEffect;
//# sourceMappingURL=useAsyncEffect.js.map